## 数字孪生在工业生产的应用

得益于物联网、大数据、云计算、人工智能等新一代信息技术的发展，数字孪生技术在工业上得到广泛的应用，覆盖了工业生产的研发仿真、工艺规划、生产制造、检测测试、监控运维等各个环节。

数字孪生技术融合产线的三维模型、地理信息、建筑信息、视频监控、人工智能、虚拟现实（AR）及物联网等多种技术，为工业产生过程中的物理对象创建虚拟数字空间，并将物理设备的各种属性及运行状态映射到虚拟孪生空间中，实现工业物理工厂与孪生虚拟工厂的虚实交融与精准映射。

数字孪生技术可以实现：

- 工厂生产三维可视化监控

  通过构建工厂三维几何模型，为各个设备、零部件几何模型添加信息属性，并与对应位置物联网数据相结合，数字孪生平台可实现覆盖人、机、料、法、环的全工厂对象及行为实时监控，结合大数据分析和 AI 算法，可以进一步实现设备碰撞预测、产线 OEE、产量优化、质量与能耗管控、人员安全管理、环境监控、专家远程指导等。

- 设备深度运维管理

  基于数字孪生将设备或生产线模型与物联网实时数据或历史数据以及 AI 算法结合，能够预测和实时分析产线中的问题，及时了解哪个设备出现问题以及出现问题的部位，做出最佳响应决策。

- 虚拟仿真培训

  基于数字孪生的虚拟仿真培训为现场工程师提供了模拟操作环境，让工程师在虚拟环境中获得和现实世界一样的沉浸式体验。通过对工程师的操作结果做出判断和预测，提供优化建议，帮助工程师快速提升技能水平。

## 工业生产数字孪生构建的挑战

在数字孪生的构建中，数据是基础、算法是核心、三维是表现形式。数据感知的覆盖面和感知精准度，将直接影响孪生虚拟工厂的实时展示效果和基于历史数据进行 AI 算法等应用的运算结果，从而进一步影响工业物理工厂与孪生虚拟工厂虚实交融的覆盖范围与映射的精准度。

![数字孪生构建图](https://assets.emqx.com/images/a837bf1a8eefb4c2c95e6f6b3d78708d.jpeg)

<center>数字孪生构建图</center>

从上图可以看出，设备实时数据感知及持久化是整个数字孪生建设的第一步，也是最为关键的环节。而在目前实际工业生产数字孪生项目建设中，普遍面临以下问题：

- 海量设备的感知

  一个中等规模的工厂及园区或工厂集群涉及到产线、人员、环控、能源、安全、储存、运输、厂房等环节的工业或物联网设备数量成千上万甚至是几十万，每个设备数据感知点往往在几个到几十个不等，需要进行规模庞大的设备数据采集。

- 各类通讯协议繁多

  工业智能设备涉及到各类工业类设备、工业系统和物联网设备，每种设备或系统都有其自身的通讯协议或方式。例如 [PLC](https://www.emqx.com/zh/blog/mqtt-and-plc) 有西门子、ABB、欧姆龙等各品牌对应的通讯协议，楼控有 BACnet 协议，穿戴设备、门禁等则支持私有 HTTP 协议等。

- 工业生产网络复杂

  受生产工艺、安全、环境、设备种类、网络成本等各方面的影响，以及在工业互联网趋势下工业数据上集团云的需求，工业生产的网络环境往往是现场总线、工业以太网、Lora、ZigBee、4G、5G 等各类网络的集合。同时，因为生产设备距离的问题，很多情况下网络处于弱网的状态。如何在复杂网络环境或互联网的环境中建立高并发、低延时的通讯管道，将是实时数据感知的关键。

- 流式数据的处理需求

  由于网络、存储以及计算资源的有限性， 数字孪生平台在海量数据传输的过程中，应在边缘端提供数据的清洗、数据预处理及实时逻辑处理等能力，实现数字孪生平台基于实时感知数据和设备状态的展示。

- 高效数据持久化需求

  数字孪生的核心是算法，有基于大数据的统计分析，也有基于机器学习、神经网络的 AI 仿真预测。两者的实现效果主要取决于算法的科学性和历史数据的精准性。面对工业数据海量、传输频率高、结构复杂的现状，如何将汇聚到私有云或公有云上的数据实时高效地持久化到数据库将是一个巨大的挑战。

## EMQ 为工业数字孪生构建坚实基础架构

基于 EMQ 支持高并发、高吞吐的云边协同数据基础设施，可以为整个工业生产数字孪生平台提供更加高效的数据传输和处理架构，帮助企业在工业厂级信息中心或集团云上更轻松地实现性能卓越的数字孪生。

![EMQ 工业生产数字孪生架构图](https://assets.emqx.com/images/70b3a4a566c4ae5ef1293c231f099697.png)

<center>EMQ 工业生产数字孪生架构图</center>

1. [边缘端工业协议网关软件 Neuron](https://www.emqx.com/zh/products/neuronex) 用于各类工业设备的接入，支持将数十种工业协议一站式转换为 [MQTT 协议](https://www.emqx.com/zh/mqtt-guide)，实现在工业生产弱网环境下的各类数据实时感知与稳定传输。

2. [边缘超轻量级 MQTT 消息服务器 NanoMQ](https://www.emqx.com/zh/products/nanomq) 用于数据的汇聚和缓存，可以打通处于不同网络中的设备、不同系统间的数据壁垒，消除信息孤岛。NanoMQ 可以在边缘端实现数据断点续传， 保障业务数据的完整性，保证数字孪生平台算法的高效与精准。

3. 工业生产感知的数据是海量且连续的，如果全部采用批量处理不对其进行分析，难以发掘数据的价值。由于数字孪生对数据量和延迟有很高要求，用传统的批处理方法处理流数据几乎是不可能的，因此流处理在边缘侧变得更加重要。超轻量[物联网边缘数据流式分析引擎 eKuiper](https://ekuiper.org/zh) 可用于流式计算、规则引擎、数据清洗、AI 扩展，为数字孪生平台提供数据清洗、数据预处理、事件逻辑处理等具体的能力。

   ![eKuiper 流式计算框架](https://assets.emqx.com/images/f54ccec75b8ea10ebaba1e46042a3935.jpeg)

4. 企业级物联网 [MQTT 消息接入平台 EMQX](https://www.emqx.com/zh/products/emqx) 部署在厂级或集团信息中心，在专网或互联网上为数字孪生平台提供高可用、高并发、低延时、安全可靠的数据传输、分析、对接能力，让数字孪生真正地实现虚拟世界是现实世界的同步映射。同时，EMQX 基于数字孪生后端算法的数据库也可提供高频、可靠、高价值的数据持久化能力。

   ![企业级物联网 MQTT 消息接入平台](https://assets.emqx.com/images/be9eaa43822074d06b759a3c6f78aa60.jpeg)


## EMQ 基础架构优势

### 一体化的「边缘端-工厂-云」数据感知传输能力

无论是设备在工厂以太网内，还是在 Lora、Zigbee 网络中，或是采用 4G/5G 物联网网卡；无论数字孪生平台在厂级信息中心或集团云上，EMQ 解决方案提供了设备到边缘端、设备到数字孪生、其他应用到数字孪生的「边缘端-工厂-云」一体化数据采集、汇聚、传输、对接能力。

### 云边流式数据处理基座

在边缘端的分析引擎 eKuiper 和中心端或云端的消息总线 EMQX 都具备通过规则引擎对数据进行逻辑处理的能力，可在不同的层级独自或者相互协同实现对数据进行实时计算分析、规范报文、过滤清洗、智能告警、业务路由等，大大减少了无价值数据对网络和存储资源的消耗。

同时，EMQX 将工厂内各类汇集而来的数据以每秒 10W+TPS 的性能写入实时数据库，降低数字孪生展示应用和算法模块的数据处理压力，提升数字孪生平台展示的实时性以及算法的精准性。

### 强大的扩展能力

随着企业数字化进程的推进，必将不断有新的设备接入和新业务平台的建设需求。EMQ 整体方案具备开放的接口、横向扩容能力、可热插拔的配置性功能模块，支持基于原来的架构灵活接入新设备，轻松响应新业务对数据的消费需求，协助企业快速、低成本扩展新业务。

## 结语

EMQ 提供的数据底座优化了整个数字孪生平台的架构，海量数据的实时对接和持久化能力帮助企业在厂级信息中心或集团云上高效构建数字孪生中三维对象和动画特效与数据的同步映射，为数字孪生平台实现浸入式体验、数据驾驶舱、生产三维同步、工业仿真优化、设备故障诊断、设备运行预测、安全事件预判等具体应用奠定了坚实基础。

基于 EMQ 数据基础设施构建高效的云边工业互联网数据通道，可以更加轻松地打造厂级信息中心或集团云上数字孪生平台架构，有利于数字孪生技术在智能制造、冶金煤矿、油气生产等各工业领域的推广和实践。企业通过虚拟世界三维模型结合感知数据的智能分析、预测诊断指导现实世界的生产管理，可以节省运行运维成本，提升企业管理水平和行业竞争力。


<section class="promotion">
    <div>
        联系 EMQ 工业领域解决方案专家
    </div>
    <a href="https://www.emqx.com/zh/contact?product=solutions" class="button is-gradient px-5">联系我们 →</a>
</section>
