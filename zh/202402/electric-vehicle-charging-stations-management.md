## 背景

随着全球对新能源汽车的需求不断增长，充电设施作为新能源汽车市场增长的关键基础设施，其重要性愈发凸显。新能源汽车市场已成为全球经济增长的重要动力，因此，充电桩的高效运营管理对于新能源汽车的普及和发展至关重要。

然而，当前的充电桩基础设施运营管理仍面临一系列挑战，如充电桩场站之间缺乏互联互通性、管理运维多处于被动状态、运维效率低下且成本高昂，以及数据价值未被充分挖掘等。为了应对这些挑战，构建一个智能网联的充电桩运营管理平台已成为行业共识。借助网联化、智能化手段，这些平台可实现终端的高效接入、实时远程监控、即时故障分析诊断以及主动预防报警等功能，从而提高充电桩的运营效率和管理水平。

但是，构建这样的智能网联充电桩运营管理平台是一个复杂的项目。需要考虑众多因素，如充电桩的类型、位置、数量、交互协议以及网络环境等。同时，在设备连接和数据传输等方面也面临着诸多技术挑战。如何利用先进的物联网和信息通信技术来解决这些问题和挑战，也成为了当前充电桩运营管理者所面临的主要任务。

## **挑战**

### 充电桩分布广泛数量庞大

为了给更多的新能源汽车提供快速便捷的充电网络，充电桩基础设施网络的建设具有站点多、分布广、充电桩总数大的特点。由于充电桩多部署在户外环境，网络环境不稳定。因此，如何确保这些充电桩在复杂环境下稳定可靠地接入并实现与云端平台的高效连接，成为了构建网联化充电桩运维管理系统的首要任务。

### 充电桩存在多种通信协议

目前，不同品牌和型号的充电桩所使用的通信协议并不统一。国家电网、南方电网、特来电和奥能等国内充电设备生产厂商和运营商大多采用基于 IEC104 协议的私有协议，但这种不统一给充电桩系统之间的互联互通带来了困难。因此，行业需要一个更加开放的协议。OCPP 开放充电协议（Open Charge Point Protocol）是一个全球性的开放通讯标准，由位于荷兰的开放充电联盟 （OCA, Open Charge Alliance) 制定，旨在解决私有充电网络间通讯的各种问题。目前，OCPP 已经在全球 49 个国家应用于超过 4 万个充电设施，并在国内得到一些厂商的采用。然而，要实现协议的统一仍需要时间的检验。因此，在现阶段，充电桩运营管理系统仍需解决不同协议的充电桩接入和通信问题。

### 站内多类型设备需要统一接入

在充电场站中，为了实现对场站环境的智能化监控管理，除了充电桩外，通常还需要接入其他类型的设备。例如，为了加强业务的管理监控，需要部署智能控制单元接入充电桩、电表、支付设备等，以便统一采集和处理充电数据、计费和支付数据。这些数据随后通过 MQTT 协议转发至云端平台。此外，为了增强充电桩场站环境及安全监控管理，电柜、变压器、地锁、道闸、智能照明、传感器等设备也需要快速接入云端。这些设备可能采用 Modbus、KNX 等以太网协议以及其他串口协议，需要通信网关设备统一汇聚后通过 MQTT、LwM2M、CoAP 等更适用于物联网的协议上传至平台。

### 连接及数据安全的保障

充电桩运营管理平台涉及用户信息安全、充电桩运行安全和数据安全等多方面的安全考量。平台必须确保用户数据不被泄露、滥用或未经授权访问。同时，充电桩运营平台收集和处理大量充电数据、用户信息等数据。因此，保障充电桩管理平台与设备、网关的连接及数据权属安全性是重要问题。通过采取严格的信息安全措施、确保充电桩稳定运行和保护数据安全，可保护用户利益和数据完整性，推动充电桩运营管理平台健康发展。

### 云端数据的汇集及集成

云端运营管理平台通常包括充电桩管理、运行状态监控、充电过程监控、故障诊断、预测性维护、能效优化、交易管理、数据挖掘分析等应用。因此，对于从设备层级感知层采集的海量数据，包括充电桩信息数据、充电车辆信息、环境感知信息等，平台不仅需要能够进行完整实时的存储与共享，还需要根据业务需求生成灵活的历史数据，以供查询和分析。灵活且高效地管理实时和历史数据，并持续进行大数据分析以挖掘数据价值，既是关键也是挑战。

## **充电桩智能网联管理运营平台方案架构**

![充电桩智能网联管理运营平台方案架构](https://assets.emqx.com/images/c85b2a09c65f43ba75e7bfc9aeffaee8.png)

针对充电桩智能网联管理运营平台的业务需求及技术挑战，EMQ 设计了一套云边协同的物联基础设施解决方案。该方案涵盖设备连接、数据移动、数据处理以及数据集成，旨在帮助用户快速构建安全、高效的充电桩运营管理平台。

通常，充电桩管理运营系统可分为设备层、网络层和云端层。在设备层，EMQ 的工业网关软件 NeuronEX 能够汇聚多种不同协议设备的实时数据，并通过 MQTT 协议上传至云端平台侧。在网络层，借助 MQTT 协议的多重机制，如心跳监测、会话保持和 QoS 等级，即使在复杂的场站网络环境下出现连接断开的情况，相应的消息传递也能在重连后恢复。在云端层，EMQX Enterprise 支持多协议、高并发接入，具备强大的数据处理能力。同时，通过内置的规则引擎，EMQX 可以根据不同运营管理业务需求，将场站内充电桩及其他各类设备的数据灵活桥接至相应的数据库。

**多类型设备数据采集与接入**

NeuronEX 工业边缘网关软件提供设备数据采集和边缘智能分析服务，可部署在各类网关设备、工控机及服务器上。凭借对多种协议的支持，包括 Modbus、OPC UA 等标准工业协议、主流 PLC 协议、IEC104 等电力行业协议、KNXnet 等场站自动化协议，NeuronEX 能够实现智能控制单元、电柜、变压器、地锁、道闸、智能照明和传感器等设备数据的统一接入。它支持高频率、低时延数据采集，并将数据汇聚后通过 MQTT 协议传输至云端。此外，NeuronEX 还具备高效的流式数据分析处理能力，可在边缘侧完成数据聚合、过滤筛选、格式转换和监控指标计算等操作，从而强化边缘侧数据价值挖掘，减轻网络带宽及云端数据存储压力。

**企业级物联接入平台**

要构建一个高效的充电桩智能运维监管平台，关键在于拥有一个能够支持多协议、高并发、高吞吐的物联接入平台。EMQX Enterprise 是基于 MQTT 协议的企业级物联接入平台，能够连接海量终端设备，提供连接和数据解决方案。其高性能、高可靠、伸缩性设计有助于解决充电桩平台在大规模设备接入、数据吞吐及数据集成等方面所面临的难题，使开发团队能更专注上层应用的开发。

**行业协议或私有协议兼容接入**

通过协议网关功能，EMQX 可接入 MQTT 协议外的其他物联协议。上层业务系统通过订阅网关定义的上行MQTT 主题，可以接收客户端上报的消息与事件；同时，通过向网关定义的下行主题发送消息，可以向充电桩客户端推送控制消息。针对充电桩行业未来发展趋势，EMQX 还实现了 OCPP 协议接入插件，支持该协议的充电桩接入与数据交互。EMQX 能够接收充电桩 OCPP 客户端的 OCPP Websocket 或 Websocket over TLS （ws/wss）连接，将充电桩客户端上下行消息处理转化为标准的 MQTT 消息。此外，在面对采用私有 TCP 协议的充电桩时，也可以通过 EMQX 的多语言扩展接入网关与用户 gRPC 服务进行交互的方式接入。

**高并发、高吞吐、高可用**

基于高可用的分布式集群架构，EMQX 支持从百万到亿级的海量并发连接、毫秒级实时消息路由以及百万级 TPS 数据吞吐，为大量充电桩并发数据和控制指令提供有力支持。

**多种接入认证保证系统安全**

EMQX 支持 TLS/DTLS 安全协议，可通过 TLS 单向及双向安全认证保护充电桩及场站网关设备与车机间的连接。它还支持与 PKI/CA 系统交互，实现一机一密的认证方案。同时，EMQX 提供了身份验证和访问控制等功能，确保数据访问的安全性。

**云端灵活的数据预处理及集成**

EMQX Enterprise 提供内置的规则引擎。在接收到车路设备数据后，通过 SQL 语句或低代码方式创建规则，对来自不同设备、结构各异的感知数据进行实时编解码、筛选、聚合等处理。根据不同应用需求，这些经过处理的数据可以灵活桥接集成到各类消息队列以及时序列数据库中，从而实现灵活的数据预处理和数据集成。

## **方案价值**

**多源数据统一接入**：通过 NeuronEX 与 EMQX 的产品组合，可以实现充电桩、网关、感知及各类电力设备的统一数据接入。这有助于企业在不同场站快速构建底层设备接入及数据传输能力，加速整体平台构建。

**边缘数据价值挖掘**：NeuronEX 提供云边协同的边缘数据处理分析能力，有助于企业深入挖掘边缘侧高价值数据，实时监测异常情况，进一步增加数据价值，并优化带宽及存储资源的利用率。

**高可靠性和扩展性**：云端的 EMQX 采用高可用集群架构，同时支持热升级和热配置，保证系统具备高水平的服务水平协议（SLA）。其集群架构还具有灵活的水平扩展能力，能够随着未来充电桩运营管理规模扩大而进行灵活的扩容。

**规则引擎数据处理与集成**：通过编写简单的 SQL 语句，在接入数据存储和转发前，可根据业务需求快速、灵活地进行消息内容处理，包括数据过滤、转换、聚合和持久化等操作。此外，根据不同应用需求，可将处理过后的数据轻松快速的桥接集成到多种消息队列，SQL，NoSQL，与其他时序列数据库，加速业务应用数据应用。

**可视化运维管理**：提供直观的可视化监控和管理界面，方便用户实时监控车机连接状态和消息流量指标。同时，支持将监控数据推送到普罗米修斯（Prometheus）等主流第三方监控系统中。此外，还支持热配置修改、热升级以及慢订阅统计、日志追踪功能，有助于排查具体的车机连接异常、消息接收时延过大等问题。

## 相关产品

### NeuronEX

[NeuronEX](https://www.emqx.com/zh/products/neuronex)  是一款面向工业领域的设备数据采集和边缘智能分析的软件，主要部署在工业现场，实现工业设备通信及工业总线协议采集、工业系统数据集成、边端数据过滤分析及 AI 算法集成，以及工业互联网平台对接集成等。其提供了以下特性：

- 统一连接：NeuronEX 提供多协议接入能力，支持如 [Modbus](https://www.emqx.com/zh/blog/modbus-protocol-the-grandfather-of-iot-communication)、OPCUA、Ethernet/IP、BACnet、Siemens、Mitsubishi 等数十种工业协议的同时接入；提供企业内 MES、WMS 等各系统多数据源的集成对接；NeuronEX 同时支持数据流的双向打通，既可实现数采，也支持控制指令下发到设备。
- 流式处理：NeuronEX 包含 100+ 内置函数，支持数据过滤、数据操作、设备控制以及数据持久化，将数据存储于时序数据库中。
- 无缝集成：支持将 C/python/go 等语言的算法集成到 NeuronEX，支持工业机理模型、机器和深度学习等模型在边端的实时推理，输出告警及智能决策。
- 灵活部署：NeuronEX 具有极低的内存占用，在 x86、ARM、RISC-V 等低配置架构设备上运行表现出色。此外，它还支持类似 Docker 的容器化部署，能够与 K8s 环境中的其他容器共同运行。
- 边缘到云：通过 [MQTT](https://www.emqx.com/zh/blog/the-easiest-guide-to-getting-started-with-mqtt)、SparkplugB 等协议，NeuronEX 将工业数据推送汇聚到云平台，NeuronEX 与云平台之间的双向数据流，形成云边数据协同及控制协同，利用平台侧大数据存储及分析能力，放大 NeuronEX 使用价值。

<section class="promotion">
    <div>
        免费试用 NeuronEX
    </div>
    <a href="https://www.emqx.com/zh/try?product=neuronex" class="button is-gradient px-5">开始试用 →</a>
</section>

### EMQX Enterprise

[EMQX Enterprise](https://www.emqx.com/zh/products/emqx) (以下简称 EMQX) 是一个强大的企业级物联网消息平台，专为大规模部署和物联网应用中的高可靠性而设计。在充电桩运营管理场景中，EMQX 通过以下能力为用户带来收益：

- 高可靠性和可扩展性：EMQX 采用分布式架构，具有高可用性和可扩展性，可以处理大规模并发消息传输。它支持水平扩展，以适应不断增长的物联网设备和数据流量，确保系统稳定性。
- 丰富的协议支持：除了 MQTT 协议外，EMQX 还支持多种消息传输协议。它允许开发人员扩展以支持各种私有协议，以满足其应用需求。
- 数据集成：EMQX 与各种数据存储服务、消息队列、云平台和应用无缝集成。它可以连接到云服务，实现远程数据传输和基于云的分析。
- 安全和认证：EMQX 提供强大的安全功能，包括 TLS/SSL 加密传输、客户端认证和访问控制。它支持多种认证方法，如用户名/密码、X.509 证书和 OAuth，确保物联网通信的安全性。
- 规则引擎和数据处理：EMQX 具有灵活的规则引擎，可以基于设备数据进行实时数据处理和转发。它支持数据过滤、转换、聚合和持久化等操作，帮助用户根据业务需求进行分析和决策。
- 可视化监控和管理：EMQX 提供直观的可视化监控和管理界面，允许用户实时监控物联网设备和消息传输。用户可以查看连接状态、消息流量和其他指标，还可以进行设备管理、故障排除和系统配置操作。

 

<section class="promotion">
    <div>
        咨询 EMQ 技术专家
    </div>
    <a href="https://www.emqx.com/zh/contact?product=solutions" class="button is-gradient px-5">联系我们 →</a>
</section>
