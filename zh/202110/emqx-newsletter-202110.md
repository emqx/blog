作为一款面向全球、用户众多的 [MQTT 消息服务器](https://www.emqx.io/zh)，从个性化需求的私有部署 EMQX Broker/Enterprise，到便捷高效的一键全托管 SaaS 服务 [EMQX Cloud](https://www.emqx.com/zh/cloud)，EMQX 系列产品可以满足不同场景和规模下的用户需求，提供可靠、实时的物联网数据移动、处理和集成。本月，EMQX 各研发团队也都有令人兴奋的进展。


## EMQX ：v5.0-beta.2 开发进展顺利

对于 9 月底发布的 beta.1 版本，我们的重点是准备好配置接口。而对于 beta.2 版本，我们的主要目标是使管理 HTTP API 稳定运行。这个 10 月，EMQX 开发团队主要在对 HTTP 管理 API 模块进行升级，其进展情况将是决定 beta.2 版本发布的关键因素。

我们还在开发另外两个未在 beta.1 版本中发布的功能，分别是分层速率控制和跨节点会话迁移，有望在 beta.2 版本发布。

### 全新的管理 HTTP API

正如我们之前提到的，新的 API 是按照 OpenAPI (Swagger) 3.0 规范进行设计。

该版本还提供了一个内置的 UI，用于演示 `curl` 命令示例，同时提供了一个「试用」按钮，可以让用户轻松地在 Web UI 中进行测试。

下图是「试用」结果的示例，它获取了 HTTP authentication API 的配置。

![EMQX HTTP API](https://static.emqx.net/images/ab84be82a14c4e98ea6ca7a6db0e8fdf.jpeg)
 

### 分层速率控制

在 EMQX 4.3 版本之前，消息传输速率控制是在连接层完成的。为了能够在不同层级分别设置速率控制，我们引入了新的分层速率控制功能。

这将允许用户在「全局」、「区域」、「监听器」和「连接」等层级控制消息速率。

### 复制会话状态

在 5.0 版本之前，EMQX 已经在集群中的节点之间提供了高可用性的持久会话。然而，会话状态不会被复制，也就是说，对于为客户端提供服务的节点，会话状态是在本地存储。如果客户端从集群中的一个节点移动到另一个节点，则会触发会话接管。鉴于 EMQX 集群在实时代码升级功能（无需重新启动服务的热修复）的帮助下可以长时间正常运行，这种设计一直运行良好。

为了提升操作友好性，我们现在引入了跨节点会话状态复制功能。这将允许用户在不丢失会话状态的情况下关闭消息服务器进行维护。


## EMQX Cloud：多项实用功能更新优化

全托管云原生 [MQTT 消息服务 EMQX Cloud](https://www.emqx.com/zh/cloud) 始终以为用户带来便捷、高效、可靠、低成本的一站式运维代管云服务为目标，EMQX Cloud 团队也一直关注用户需求与反馈，不断优化完善产品。本月，我们从用户的实际业务需求出发，更新和优化了多项实用功能。

### 新增项目管理功能

对于大中型企业而言，往往需要不止一个 [MQTT 集群](https://www.emqx.com/zh/blog/tag/mqtt-broker-集群)，因此多集群管理就成了一个难题。EMQX Cloud 在 10 月推出了多项目管理功能，用户可以在管理界面上自助创建项目，并将 MQTT 实例与项目关联。拥有多实例的用户可以借助这一功能，根据企业组织部门或业务结构精细化管理 EMQX Cloud 上的实例。

与此同时，多账号功能也在积极开发中，预计很快就会正式推出。多项目管理结合子账号管理的能力将帮助用户更方便、更安全的管理云上资源。

### 支持在 Azure 平台建立 VPC 对等连接

本月新增了 Azure 平台上的 VPC 对等连接支持，用户可以通过 EMQX Cloud 的管理界面自助创建 Azure VPC 对等连接。创建后用户在 Azure VPC 平台的应用即可与 EMQX Cloud 的服务通过内网通信，进而降低消息传输延时，节省大量公网流量成本，同时也确保了数据安全。

### EMQX Cloud 旗舰版国内开放试用

EMQX Cloud 旗舰版在专业版的基础上增加了设备管理、设备影子、编解码、边缘管理等物联网平台能力。本月 EMQX Cloud 旗舰版正式对部分受邀客户开放了试用。通过 EMQX Cloud 旗舰版，用户不仅可以使用最专业的 [MQTT 服务](https://www.emqx.com/zh/cloud)，同时也可以利用完备的设备管理能力，轻松搭建企业内部的物联网平台。

> 详情可添加 EMQ 商务微信进行咨询。
>
> <img width=240 alt="EMQ 商务微信" src="https://static.emqx.net/images/744b3b2a3470e4092ed95ba40b8a68ed.png">

### 完善 EMQX Cloud 上部署实例的告警

监控和告警是云服务提供托管服务的重要组成部分，为了更好地监控 EMQX 实例的运行状态，及时发现异常情况，本月我们对 EMQX 的各项监控指标进行了完善。包括规则引擎的资源状态、规则引擎事件触发情况、部署认证的异常、消息丢弃情况、消息吞吐量、部署连接数等关键指标。

### 支持国内客户转包年计费

EMQX Cloud 在推出包年付费模式后受到了大量用户的欢迎。针对部分存量付费客户希望从按小时计费切换到包年计划的需求，我们从本月开始支持小时转包年计费的付费模式切换。客户提出申请即可一键切换到包年计划，从而节省成本。

### 海外用户新增包年付费模式

继九月国内站发布包年支付方式后，本月起 EMQX Cloud 海外站也开始支持包年付费。用户可以直接在部署界面选择包年计划进行年费预支付，相比小时计费模式预计每年可节省约 15% 的使用成本。

### 海外用户支持 VAT 号登记并完善账单信息

随着海外用户尤其是欧盟用户的不断增多，我们需要根据不同国家的法律法规来完善每个月的账单信息，尤其是在税务方面。VAT （Value Added Tax）信息现已加入了欧盟用户的账单信息中。我们在用户绑定信用卡时允许用户输入一个合法的 VAT 账号，并在月末账单中体现出 VAT 的金额。


为了完成「通过世界级软件产品服务人类未来产业与社会」的使命，敬请期待一个更优秀的 EMQX。
