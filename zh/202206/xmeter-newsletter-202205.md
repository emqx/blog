五月底，XMeter 企业版 4.0.0 版本完成了开发测试，正式发布。仍基于虚拟机/物理机部署测试资源的 3.2.3 版本也已完成大部分的优化项和修复项，预计于 6 月中旬发布。

## 企业版 4.0.0 版本概览

### 测试机资源基于 k8s 部署

4.0.0 版本目前支持在 AWS 的 EKS 和 阿里云的 ACK Kubernetes 集群服务上部署测试机资源。

本版本中，包含改造过的 JMeter 单元的容器将运行于 Kubernetes Pod 中，每个 Pod 以预定义的规格申请分配相应的 CPU 及内存资源。测试人员提交测试请求后，系统的测试管理模块将根据测试的配置，计算所需的 Kubernetes Pod 数量，并以 Kubernetes Job 的方式调度相应的 Pod 。协同各 Pod 的状态就绪后，由各 Pod 同时模拟并发的虚拟用户，开始向被测应用服务发压。XMeter 系统主控与 Kubernetes 集群之间的交互通过调用 Kubernetes API 实现，同时，使用了 EKS 或 ACK 的集群节点弹性伸缩功能后，无需事先启动大量节点，根据新启动的 Kubernetes Pod 数量在必要时完成节点自动扩容，即可完成测试任务。

![JMeter Kubernetes](https://assets.emqx.com/images/f048597d6a37226fcdc589669720a9be.png)

如果希望使用其他云厂商的 Kubernetes 集群服务部署 XMeter 企业版 4.0.0 的测试资源，或者希望使用自建的 Kubernetes 服务，请点击[联系我们](https://www.emqx.com/zh/contact?product=xmeter)与我们取得联系以做进一步的评估。

### 系统配置可在管理员端操作

除了直接修改服务器上的配置文件以修改系统配置项，从 4.0.0 版本开始，管理人员可以直接从管理员控制台对主要的系统配置项进行更改。

![XMeter 系统配置](https://assets.emqx.com/images/56f40c29b6c79bc69ff52129f8ca4e1a.png)

### 其他优化与修复

- 移除对 ZooKeeper 的依赖
- 优化在线测试报告，完善图表之间的联动及折线图的框选功能
- 优化测试报告导出功能
- 修复删除测试脚本时无法级联删除测试记录的问题
- 修复测试报告中，极小失败率下小数位数显示问题
- 修复导出电子报告中，测试图表截图不完整的问题
- 修复一个脚本的多个测试，不同的容器用户数配置会相互影响的问题
- 修复部分页面表格意外触发勾选操作的问题
- 修复测试体配置下载模板的表头样式问题
