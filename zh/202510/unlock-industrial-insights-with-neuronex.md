## 引言

在瞬息万变的工业互联网浪潮中，海量设备数据如涓涓细流，汇聚成河。如何驾驭这些数据，将其转化为驱动智能决策的强大引擎，一直是工业界关注的焦点。过往的 NeuronEX 版本，我们专注于解决工业现场海量异构数据的实时采集与边缘流式计算难题，为您的数据河流搭建了坚实的管道。

而今，随着 [NeuronEX](https://www.emqx.com/zh/products/neuronex) 3.6.0 的正式发布，我们为您带来了全新的「数据探索」功能。通过内置时序数据库、AI 赋能的数据分析能力，以及高度可定制的可视化仪表盘，NeuronEX 3.6.0 将原始工业数据转化为深刻洞察，真正实现了从数据到价值的闭环，让您的工业数据真正「活」起来。

**本文将详细介绍数据分析部分的操作说明，并附上视频演示，让您轻松掌握这一强大工具。**

<video controls width="760px">
    <source src="https://cdn.emqx.com/video/unlock-industrial-insights-with-neuronex.mp4" type="video/mp4">
</video>

## 核心功能组件

数据探索模块主要包含以下两大核心功能组件：

- **数据分析 (Data Analysis):**
  - 一个统一的界面，允许您通过直观的树形目录浏览已存储的数据点位。
  - 提供智能 SQL 编辑器，支持语法高亮、关键字提示，让您能够精确地查询所需数据。
  - 集成 AI 数据分析助手，可以通过自然语言驱动复杂 SQL 查询的生成与迭代修正，极大降低数据查询门槛。
  - 查询结果可以灵活地以表格或图表形式展示，并支持图表交互（缩放、下载）。
- **仪表盘 (Dashboards):**
  - 允许您创建和定制个性化的数据可视化仪表盘。
  - 通过配置多个 Panel，每个 Panel 绑定一个或多个 SQL 查询，将关键数据以折线图、柱状图、统计值或表格等多种形式集中展示。
  - 支持灵活的时间范围选择和自动刷新机制，确保您始终关注最新数据动态。
  - 通过拖拽调整 Panel 布局和大小，打造最符合您监控需求的视图。

## 功能开启

为了使用数据探索功能，需要启动内部时序数据库。登录 UI 界面后，依次点击**管理**、**系统配置**、**数据存储配置**，点击**时序数据库 Datalayers** 按钮即可，如图所示。

![image.png](https://assets.emqx.com/images/1f3878ab8f8157ac0a131d2049dcfd93.png)

然后，导航到**数据采集**，**北向应用**，**DataStorage**，点击添加订阅按钮，选择将要存储到时序数据库里的数据。

![image.png](https://assets.emqx.com/images/384222de4ab73ed6bde687cf6e4d2eab.png)

## 数据分析操作指南

### 功能预览

导航到**数据探索**，**数据分析**页面，即可进入数据分析主页面，如图所示

![image.png](https://assets.emqx.com/images/1dc33d941a1baf5a3cf1228ee916d413.png)

页面通常划分为：

- **左侧数据源导航区:** 以树形结构展示数据。
- **右上 SQL 输入与配置区:** 用于编写和执行 SQL 查询。
- **下方结果展示区:** 显示查询结果（表格或图表）

### 数据源树形目录

- **结构化展示:** 左侧以树形结构清晰列出已开启 Datalayers 存储的南向驱动、其下的采集组以及具体的数据点位。
- **类型显示:** 每个点位后会明确标注其在 Datalayers 中存储的数据类型 (例如: `Int`, `Float`, `Bool`, `String`)，帮助用户构建正确的查询。
- **便捷操作:**
  - **刷新:** 支持手动刷新树形目录，获取最新的驱动/组/点位信息。
  - **点位搜索:** 提供点位名称搜索功能，快速定位目标点位。
  - **SQL 查询示例:** 选中某个数据点位后，系统会自动提供常用 SQL 查询示例，例如：
    - `Query Column`: 查询该点位的最近 100 条数据。
    - `Query Period`: 查询该点位过去一天的数据。
    - `Query Max`: 查询该点位的最大值。 用户可以直接使用这些示例或在此基础上进行修改。
  - **AI Query (与 LLM 集成):**
    - 选中点位后，可选择「AI Query」功能。
    - 系统会将点位名称和对应数据表信息（例如 `neuron_float`, `tag='your_tag_name'`）自动预填充到 AI 交互框或作为上下文传递给 AI。
    - 用户可以通过**自然语言**描述查询需求（例如“查询这个点位过去一天每小时的平均值”），由集成的 LLM 生成复杂的 SQL 查询语句。

### 智能 SQL 输入区

- **辅助编写:**
  - **关键字提示:** 输入 SQL 时，提供常见的 SQL 关键字自动补全提示。
  - **语法高亮:** 对 SQL 语句进行语法高亮，提高可读性。
  - **行号显示:** 便于定位和调试。
- **查询限制:**
  - **单条查询:** 目前支持执行单条 SQL 查询语句。
  - **查询类限定:** **仅接收查询类 SQL 语句 (SELECT)**。为保证数据安全和系统稳定，**不支持** `CREATE TABLE`, `INSERT`, `DELETE`, `UPDATE` 等数据定义或修改操作。

### 结果展示区

- **多视图展示:** 每个成功执行的 SQL 查询结果，都会在该区域以表格 (Table) 或图表 (Chart) 的形式进行展示。
- **表格 (Table) 显示:**
  - 默认展示方式，以行列结构清晰呈现查询返回的数据。
  - 支持分页、排序等基本表格操作（具体功能视前端表格组件而定）。
- **图表 (Chart) 显示:**
  - **支持条件:** 如果 SQL 查询结果中包含时间戳字段和数值字段，系统会自动支持将结果切换到图表视图。
  - **图表类型:**
    - **折线图 (Line Chart):** 适用于展示时序数据的趋势变化。
    - **柱状图 (Bar Chart):** 适用于比较不同类别或时间点的数据量。
  - **交互功能:**
    - **图表缩放:** 支持对图表进行局部放大查看细节。
    - **保存下载:** 支持将当前图表保存为图片文件 (如 PNG) 下载到本地。
    - **图例交互:** （通常图表库会支持）点击图例可以显示/隐藏对应的系列，方便聚焦分析。

### AI 数据分析助手集成

“数据分析”页面深度集成了 AI 数据分析助手，旨在帮助用户更轻松地构建和优化 SQL 查询。注意用户使用此功能前需要开启 AI 功能，还需要配置使用的模型。

**功能开启与模型配置**

依次点击 **管理**、**系统配置**、**AI Agent**、点击开启 AI Agent 按钮即可，如图所示

![image.png](https://assets.emqx.com/images/79f8b1c24b7a32673fc85d00ea49fe60.png)

配置模型时，依次点击 **管理**、**系统配置**、**AI 模型配置**、点击新增模型配置按钮，目前支持 DeepSeek、SiliconFlow、OpenAI 和 Azure OpenAI 的模型。用户需要准备好相应平台的 API Key。

![image.png](https://assets.emqx.com/images/60e434540921bf9aad22d2d9c5d77997.png)

**UI 入口:**

- 通过页面右上角的`AI 数据分析`按钮，点击可打开 AI 交互对话框。
- 如前所述，点位操作项中也提供了`AI Query`的快捷入口。

**AI 交互框:**

- **默认页面引导:** 当从主入口打开 AI 对话框时，会提供引导性提示，告知用户 NeuronEX 按数据类型分表存储 (`neuron_float`, `neuron_int`, `neuron_bool`, `neuron_string`)，并建议用户在提问时提供点位名和数据类型。同时，提供可点击的查询示例，帮助用户快速上手。
- **点位上下文预填充:** 从点位“AI Query”入口进入时，点位名称和对应的数据表（例如 `neuron_float`, `tag='tag1'`）会自动预填充到对话框或作为上下文传递。

**AI 核心能力:**

- **自然语言转 SQL:** 将用户的自然语言查询需求转换为正确的 SQL 语句。
- **SQL 迭代修正:** 当生成的 SQL 执行出错时，AI 能够智能分析错误原因，并利用系统提供的工具（如查询表结构）进行多轮迭代修正，直至生成可成功执行的 SQL。

## 结语

通过**内置时序数据库**的坚实基础，**直观高效的数据分析界面**，以及革命性的**AI 数据分析助手**，我们打破了工业数据查询与分析的传统壁垒。用户无需成为 SQL 专家，即可通过自然语言轻松挖掘时序数据的趋势、关联与异常，让沉睡的数据“活”起来，真正服务于生产优化、预测性维护和智能决策。

全新的**仪表盘功能（链接到前文）**则将这些洞察以高度可视化的方式集中呈现，构建起企业关键指标的动态监控中心，让数据价值一目了然。

从海量异构数据的实时采集、边缘流式处理（过往版本的核心），到如今在边缘节点即可实现的深度数据探索与可视化（[NeuronEX](https://www.emqx.com/zh/products/neuronex) 3.6.0 的突破），我们致力于构建一个**从数据接入到价值洞察的完整闭环**。这不仅提升了现场数据的即时可用性，更将数据驱动的决策力下沉至生产一线，为构建更敏捷、更智能、更高效的智能制造体系奠定了坚实的数据基础。



<section class="promotion">
    <div>
        咨询 EMQ 技术专家
    </div>
    <a href="https://www.emqx.com/zh/contact?product=solutions" class="button is-gradient">联系我们 →</a>
</section>
