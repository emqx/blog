## 引言

在人工智能技术与车载算力持续突破的驱动下，现代车辆的数字化进程正加速推进。车联网系统将突破传统云端架构的局限，依托边缘计算与 AI 融合技术，实现人车交互体验的范式重构‌。通过构建基于多源异构数据的自动化分析框架，系统可生成具备业务洞见的可视化报告，显著提升业务团队的数据应用效率‌。

本文以驾驶行为分析与车辆控制为研究样本，阐述车云协同架构与 MCP over MQTT 协议的技术整合方案。该方案不仅可以有效控制数据处理成本并提升用户数据安全性，还能通过数据融合机制构建支持实时决策的智能分析引擎‌。值得注意的是，未来系统通过建立多维业务数据关联模型，可快速输出涵盖驾驶习惯分析、车辆健康诊断等领域的深度洞察报告，为车主提供具有预见性的数字化服务体验‌。

这一技术实践为行业智能化转型提供了可复用的升级路径。随着车载系统从环境感知向认知决策的纵深发展，以数据价值挖掘为核心的创新应用场景将加速落地，推动车联网生态向“车路云一体化”方向持续进化‌。

## 驾驶行为分析的前景与挑战

在车联网发展进程中，驾驶行为分析正从单一的安全评估工具，进化为贯穿车辆全生命周期的价值中枢。以商用车险与货运管理为例：保险公司依托急加速、深夜驾驶等多项核心指标建立 UBI 动态保费模型，实现风险定价精度的大幅提升；物流企业则通过最高时速、急减速频次等数据构建司机画像体系，使百万公里事故率得到有效的控制。这些商业价值的释放，正在重构传统运输行业的成本结构。

目前的大部分方案都是基于云计算的架构，将所需的原始数据都采集到云端，比如将急加速、急减速、深夜驾驶时长、最高时速、不系安全带等，在云端对这些数据进行分析和处理。目前常见方案的主要问题有：

- **原始数据处理成本高**：大量车载数据传输、存储和计算耗费资源，无法价值转化将导致沉没成本；
- **网络波动影响数据完整性**：云端传输链路不稳定可能造成关键数据缺失，降低分析结果可信度；
- **数据隐私问题**：未经脱敏的个人驾驶数据上传到云端，增加了隐私信息被非法获取的风险；
- **多源数据融合效率低**：地图/天气/实时交通等多维数据整合复杂度高，延缓有效业务洞察的产出效率。

## 基于 MCP over MQTT 的车云协同方案

为解决上述问题，EMQ 基于 [MCP over MQTT](https://www.emqx.com/zh/blog/mcp-over-mqtt) 与车云协同架构，为驾驶行为分析提供了一种更加智能、高效、可靠的方案。

使用 SDVFlow 软件在车端直接对车载数据进行分析与处理，将结果保存在车端，并通过在车端部署 MCP 服务对其进行封装。然后使用 MCP over MQTT 协议将服务注册到 EMQX，在经过用户的许可之后，可以动态地调用和获取到保存在车端的驾驶行为数据。再集成其他 MCP 服务，通过大模型动态生成一个完整的驾驶行为分析报告。

![MCP over MQTT 的车云协同方案](https://assets.emqx.com/images/8131c12acd446cd983f65c03870bef54.png)

### **方案优点**

- **降低成本**：数据传输和存储成本极大降低，同时，对车端计算资源的利用也降低了云端的算力成本；
- **隐私保障**：用户自主控制分析结果分享流程，有效降低数据泄漏风险；
- **智能洞察**：基于大模型动态调度车端/云端 MCP 工具链（地图/天气/交通等），快速生成高价值驾驶分析报告。

这种方式下，如果车辆不在线，需要设置一个按车辆上线事件触发的工作流，即当发现车辆上线的时候，自动触发预先定义好的工作流。

### 主要流程

1. AI 工作流作为 MCP 客户端需要获取部署在车端 MCP Server 的工具列表，包含返回相关驾驶行为数据的工具，主要包括：
   - 急加速：时间，地理位置信息
   - 急减速：时间，地理位置信息
   - 最高时速：时间，地理位置信息和最高速度
2. 高德地理编码查询：直接调用高德暴露的 MCP 服务
   - 根据地理位置信息，获取相关的行政区划信息
3. 历史天气数据查询：封装第三方的 API 服务为 MCP 服务
   - 根据行政区划信息和时间作为输入查询天气
4. 根据这些信息，生成相关的驾驶行为报告。

相关的代码可以通过 [GitHub - emqx/sdv-mcp-demo](https://github.com/emqx/sdv-mcp-demo) 获取，在运行程序之前，请仔细阅读代码库中 `README.md` 文件，并在相关的第三方服务申请相关的 App Key 后填入 `.env` 文件中。

请注意：

- 为了使演示流程简单，代码库中使用的是模拟的驾驶行为数据（在 `data/vehicle_00001.json` 文件），真正的生产环境中是通过 SDVFlow 软件生成的数据；
- 系统提示词对生成的报告会有很大的影响，读者可以参考代码库中的 `prompts/system.txt` 文件，对生成的报告格式做相关的调整；
- 实际生产环境代码中，车辆不能保证实时在线，因此需要加一些逻辑确保车辆上线后才会对其进行调用，比如订阅车辆上下线的通配符主题、发现车辆上线时启动 AI 工作流。

## **样例报告展示**

本次驾驶行为分析报告由 DeepSeek V3 模型基于模拟数据自动生成。值得一提的是，AI 精准识别了 2023 年 1 月 12 日北京市怀柔区的小雪天气状况，展现出 AI 在评估此类特殊天气条件下驾驶行为的合理判断能力。

**车辆编号：00001**  
**分析周期：2023 年 1 月 1 日 - 2023 年 1 月 13 日**  

### 一、数据概览

- **总驾驶事件数**：5 次  
- **高风险事件数**：3 次（急加速/急减速）  
- **最高速度记录**：98 km/h  
- **主要行驶区域**：北京市（朝阳区、怀柔区）  

### 二、驾驶行为详细分析

1、**速度行为分析**

| **指标** | **数值** | **行业基准** | **评估** |
| :------- | :------- | :----------- | :------- |
| 最高速度 | 98 km/h  | ≤80 km/h     | ⚠️ 超速   |
| 平均速度 | 56 km/h  | 40-60 km/h   | ✅ 正常   |
| 超速频率 | 1次      | 0次          | ⚠️ 需关注 |

车辆在 1 月 13 日记录到 98 km/h 的超速行为（城市道路限速通常为 80 km/h）；其他时段速度控制良好，符合城市驾驶规范  

2、**加减速行为分析**

| **事件类型** | **发生次数** | **环境关联**    | **风险等级** |
| :----------- | :----------- | :-------------- | :----------- |
| 急加速       | 1次          | 晴天/干燥路面   | 中等         |
| 急减速       | 3次          | 2次小雪/1次多云 | 高           |

**典型事件**：1 月 12 日小雪，出现连续 2 次急减速（减速度＞0.4g）。

**可能原因：**冰雪路面制动距离延长导致紧急制动。

### 三、环境因素关联分析

**天气影响**

| **天气** | **急加速** | **急减速** | **超速** |
| :------- | :--------- | :--------- | :------- |
| 晴天     | 1次        | 0次        | 0次      |
| 小雪     | 0次        | 2次        | 0次      |
| 多云     | 0次        | 1次        | 1次      |

**关键结论**：恶劣天气（小雪）导致制动相关风险事件增加 200%；良好天气时容易出现超速倾向。

### 四、风险诊断与改进建议

#### 1、风险行为

**超速驾驶（98 km/h）**  

- 发生条件：多云/风力较大。
- UBI 风险系数：+15%。

**连续急减速（小雪天气）**  

- 反映问题：冰雪路面适应能力不足。
- UBI 风险系数：+20%。

#### 2、改进建议

**驾驶员培训**：  

- 冰雪路面制动技巧专项培训。
- 速度敏感性训练，建议安装超速语音提醒。

**车辆检查**：  

- 轮胎磨损检查，重点检查冬季胎纹深度。  
- ABS系统诊断。

**保险建议**：  

- 当前风险等级：B级（中等偏高）  
- 建议保费调整：+8%（若未改善将升至+15%）  

## 总结

随着人工智能与边缘计算技术的发展，车联网系统正逐步突破传统云端架构的局限。EMQ 基于 MCP over MQTT 协议的车云协同方案，能够在车端直接处理数据并封装分析结果，显著降低了云端数据传输与存储成本，同时通过用户授权机制提升数据隐私安全性。整合车端 MCP 服务与云端第三方数据，并利用大模型动态生成驾驶行为分析报告，实现了从数据采集到业务洞察的高效闭环。

这一技术实践不仅为车联网生态向「车路云一体化」演进提供了可复用的路径，更通过数据价值的挖掘推动了车联网行业的智能化转型。未来，随着车载系统向认知决策深化，该方案有望在更多创新应用场景中释放潜力，助力用户服务体验的持续升级。



<section class="promotion">
    <div>
        咨询 EMQ 技术专家
    </div>
    <a href="https://www.emqx.com/zh/contact?product=solutions" class="button is-gradient">联系我们 →</a>
</section>
