随着物联网技术的发展与普及，越来越多的智能设备具备了网络连接与数据传输能力。由于物联网场景复杂多样，设备端硬件条件、网络稳定性、流量限制、设备功耗以及设备连接数量等多方面因素造成物联网设备的消息传递与传统互联网场景有着很大不同。在物联网场景中，从设备到云端平台主流的消息协议有MQTT（Message Queuing Telemetry Transport，消息队列遥测传输）、CoAP(Constrained Application Protocol，受限应用协议)等。相对于互联网常用的HTTP协议，MQTT、CoAP等物联网协议有着轻量级、低功耗、低带宽需求、消息质量保证等特点。如今市场上大量物联网设备、模组都支持标准的MQTT和CoAP协议。

如今物联网设备上云的需求越来越大，很多物联网设备厂商希望能够通过比较快速灵活的方式将设备数据对接到云端，并利用公有云或者私有云上的行业应用、大数据、人工智能等服务充分消费设备端数据，以便更好的为生产和业务提供新的发展动力。云端的物联网消息中间件服务是一种能够快速的将设备端数据接入到云平台的方案；由于以云端消息中间件的方式提供SaaS类服务，设备厂商可以通过标准MQTT、CoAP协议将设备对接到云平台并灵活对接后端应用或者云端数据服务。

EMQ作为全球知名的物联网消息中间件提供商，基于EMQX物联网消息中间件产品，为广大公有云、私有云厂商提供了物联网协议消息接入的SaaS能力。EMQX是目前唯一一款同时支持MQTT，CoAP等常用物联网协议的消息中间件产品。 EMQ通过提供可定制的方案对接各类云平台的基础架构以及后台服务系统，为设备厂商与云提供商快速提供对接海量物联网设备的能力。

**EMQ为云端接入提供两种消息接入服务架构：**

**1.单集群多租户架构：**
![WX20190803140159.png](https://assets.emqx.com/images/2db64b7080eb5b19766770eec507a9c7.png)

此架构适用于单个企业用户设备接入量在中小规模，对成本敏感性强，希望云端提供价格相对低廉的物联网消息中间件服务能力。在此架构中，不同云平台租户共享同一个EMQX集群；云平台提供商可以通过此方式节约平台IaaS层计算节点和网络的开销，达到成本最优化。EMQ集群可通过与IaaS层API的对接实现自动水平扩展，无需担心租户和设备量增加后集群无法承载的文同。由于EMQ本身提供在单个集群中多租户的消息隔离，用户和平台无需担心数据安全问题。单一集群架构对云平台提供商来说，对消息中间件服务的运维工作也相对简单。

**2.租户专有集群架构：**

![2.png](https://assets.emqx.com/images/6f674de17d204c6676c9319c1b9def56.png)

此架构适用于大型企业租户，对大规模设备并行接入、低延时响应以及对整体数据私密性有比较高的要求租户会更倾向于此类架构。此架构会为每个租户提供独立的EMQX集群，保证用户的高并发和高性能需求。私有集群架构同样可以支持可通过与IaaS层API的对接实现对每个集群的自动水平扩展。由于为每个租户提供独立集群，在IaaS层资源消耗以及运维方面的成本都会相对高一些。

云提供商也可以混合部署两套方案，为不同种类租户提供不同的接入方案。EMQ 会根据云提供商的需要，提供运维管理界面、计费系统对接、IaaS层对接以及其他技术支持和定制开发服务。

**通过EMQ提供的云平台消息队列解决方案，云提供商可以快速建立自己的物联网消息接入服务，帮助不同需求的设备厂商快速将设备接入云端，实现设备数据上云。**
