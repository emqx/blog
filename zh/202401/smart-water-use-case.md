## 摘要

水务数字孪生平台可以帮助水务管理者更加了解水务系统运行情况，提高系统的安全性、稳定性和效率，优化水资源利用和运营成本。同时，它也为决策者提供了更科学的依据和决策支持，推动水务行业的数字化转型和智能化进程。

随着水务行业的数字化转型的加深，越来越多的水厂开始关注和采用数字孪生技术。国内的水务科技公司和研究机构在数字孪生水厂领域进行了一系列创新研究和实践应用。例如，通过结合物联网、人工智能、大数据等技术，实现对水厂系统的实时监控、预测优化、智能化运维等方面的突破。随着政策支持力度的加大，预计数字孪生水厂将在未来继续迎来更广阔的发展前景。

EMQ 可帮助企业构建数字孪生水厂的高精度物联网数据基座。基于轻量级的消息传输协议 MQTT 以及云边协同的数据处理架构，EMQ 可以提供 10 万条数据/秒入库能力、数据传输延时降低到 100ms 以内、提高 40% 以上水务数据实时采集和处理效率。

## 建设智慧水厂面临的挑战

- **各类通讯协议繁多:** 一个水厂的设备涉及到各类工业类设备、工业系统和物联网设备，每种设备或系统都有其自身的通讯协议或方式。例如 PLC 有西门子、ABB、欧姆龙等各品牌对应的通讯协议，楼控有 BACnet 协议，而穿戴设备、门禁等则支持私有 HTTP 协议等。生产的网络环境往往是现场总线、工业以太网、Lora、ZigBee、4G、5G 等各类网络的集合。同时，因为生产设备距离的问题，很多情况下网络处于弱网的状态。如何在复杂网络环境或互联网的环境中建立高并发、低延时的通讯管道，将是实时数据感知的关键。

- **流式数据的处理需求:** 由于网络、存储以及计算资源的有限性， 数字孪生平台在海量数据传输的过程中，应在边缘端提供数据的清洗、数据预处理及实时逻辑处理等能力，实现数字孪生平台基于实时感知数据和设备状态的展示。

- **高精度数据入库需求:** 数字孪生的核心是算法，有基于大数据的统计分析，也有基于机器学习、神经网络的 AI 仿真预测。两者的实现效果主要取决于算法的科学性和历史数据的精准性。面对水务数据海量、传输频率高、结构复杂的现状，如何将汇聚到私有云或公有云上的数据实时高效地持久化到数据库将是一个巨大的挑战。

## **基于 EMQ 高精度物联网数据基座构建数字孪生智慧水厂**

基于 EMQ 云边协同物联网基座构建数字孪生智慧水厂，可以实现对水厂运营的全面数字化和智能化管理：

![数字孪生智慧水厂](https://assets.emqx.com/images/bd27ea1851065e27cc8b747849bbdd07.png)

- **设备接入和数据采集：**NeuronEX 具备工业软网关能力，可以在近设备端将水厂中的各种设备、传感器和监测装置接入到系统中，通过 MQTT 协议进行数据传输。这些设备可以包括水处理设备、泵站、水质监测仪器等。EMQ 高可用集群的物联网基座能够处理大规模的设备连接和数据传输，确保数据的实时性和可靠性。
- **边缘数据处理能力：**NeuronEX 具备边缘计算能力，可以在近设备端进行实时的数据处理和分析，减少数据传输和处理时延。例如，边缘节点可以对从传感器中采集到的水质、温度、以及水压等数据进行实时分析，实现快速的异常检测和预测。所以，边缘计算能够提升数字孪生系统对实时事件和异常情况响应的实时性。当发生水厂设备故障、水质异常等紧急情况时，边缘节点可以立即进行本地决策和响应，避免因为系统对中央服务器的依赖和传输延迟导致的事故和损失扩大化。
- **数据存储和处理：**EMQ 物联网基座支持以每秒超过 10 万条消息的速度采集、传输设备数据到云端或在本地服务器进行存储和处理。这些数据通常包括水质指标、水压、流量等参数。EMQ 提供对于大规模数据存储和处理，可以使用云服务或分布式数据处理技术，以确保高效的数据管理和分析能力。
- **数字孪生模型建立：**基于 EMQ 物联网基座采集的毫秒级的实时数据以及标准的 MQTT、HTTP 数据接口，可以轻松基于 BIM、Unity 3D 等 3D 可视化技术建立水厂的数字孪生模型。这个模型可以是一个虚拟的、可模拟的水厂系统，通过与实际系统的数据对比，可以实时反映水厂的运行状态。
- **运行预测与优化：**基于 EMQ 提供通过高频存储、高精度的历史数据资产，结合机器学习、深度数据挖掘等 AI 算法构建数字孪生模型，可以对水厂的运行进行优化和预测。例如，可以通过模型分析得出最佳的水处理工艺、最节能的设备运行方案，或者根据实时监测的数据预测设备故障或水质异常。可及时采取相应的措施，提高水厂的运行效率和水质安全性。

综上所述，基于 EMQ 物联网基座构建数字孪生智慧水厂可以实现对水厂运营的全面监控、优化和预测。通过数字化和智能化的手段，可以提高水厂的运行效率，降低运维成本，并保障水质安全。

## 方案价值

- **一体化的数据感知、处理、传输、存储能力：**EMQ 云边协同一体化方案实现了水厂设备数据采集、边缘计算、实时数据传输、数据持久化能力，通过解耦的方式为数字孪生平台实现高精度仿真、业务融合、预测与优化等能力提供了高质量的物联网数据基座，助力其高效、敏捷开发和构建。

- **云边流式数据处理基座：**在边缘端的边缘计算 NeuronEX 和中心端或云端的消息总线 EMQX 都具备通过规则引擎对数据进行逻辑处理的能力，可在不同的层级独自或者相互协同实现对数据进行实时计算分析、规范报文、过滤清洗、智能告警、以及业务路由等。大大提升了系统对数据处理、对异常事件感知的能力。同时，EMQX 将水厂内设备监测及生产数据以每秒超过 10 万条的速度写入实时数据库，降低数字孪生展示应用和算法模块的数据处理压力，提升数字孪生平台展示的实时性以及算法的精准性。

- **强大的扩展能力：**随着水务企业数字化进程的推进，必将不断有新的设备接入和新业务平台的建设需求。EMQ 整体方案具备开放的接口、横向扩容能力、可热插拔的配置性功能模块，支持基于原来的架构灵活接入新设备，轻松响应新业务对数据的消费需求，协助企业快速、低成本扩展新业务。

## 推荐产品

### NeuronEX

[NeuronEX](https://www.emqx.com/zh/products/neuronex) 是一款用于工业物联网连接和边缘计算的边缘服务，通过标准协议或专用协议与众多不同类型的工业设备进行通信，实现将多个设备连接至物流平台。其提供了以下特性：

- 统一连接：NeuronEX 提供多个可插拔模块，如 [Modbus](https://www.emqx.com/zh/blog/modbus-protocol-the-grandfather-of-iot-communication)、OPCUA、Ethernet/IP、BACnet、Siemens、Mitsubishi 等，有助于访问各类物流资产，确保数据连接。
- 流式处理：NeuronEX 内置流处理引擎，通过边缘侧的流式 SQL 语句，实现 AI/ML 分析、数据过滤、数据操作、设备控制以及数据持久化，将数据存储于时序数据库中。
- 无缝集成：通过 [MQTT 协议](https://www.emqx.com/zh/blog/the-easiest-guide-to-getting-started-with-mqtt)，NeuronEX 将工业物联网应用、大数据以及 AI/ML 分析软件无缝集成至各个平台。
- 灵活部署：NeuronEX 具有极低的内存占用，在 x86、ARM、RISC-V 等低配置架构设备上运行表现出色。此外，它还支持类似 Docker 的容器化部署，能够与 K8s 环境中的其他容器共同运行。

<section class="promotion">
    <div>
        免费试用 NeuronEX
    </div>
    <a href="https://www.emqx.com/zh/try?product=neuronex" class="button is-gradient px-5">开始试用 →</a>
</section>

### EMQX Enterprise

[EMQX Enterprise](https://www.emqx.com/zh/products/emqx) 是一个强大的企业级物联网消息平台，专为大规模部署和物联网应用中的高可靠性而设计。在油气物联网平台建设中，EMQX Enterprise 通过以下能力为用户带来收益：

- 高可靠性和可扩展性：EMQX Enterprise 采用分布式架构，具有高可用性和可扩展性，可以处理大规模并发消息传输。它支持水平扩展，以适应不断增长的物联网设备和数据流量，确保系统稳定性。
- 丰富的协议支持：除了 MQTT 协议外，EMQX Enterprise 还支持多种消息传输协议。它允许开发人员扩展以支持各种私有协议，以满足其应用需求。
- 数据集成：EMQX Enterprise 与各种数据存储服务、消息队列、云平台和应用无缝集成。它可以连接到云服务，实现远程数据传输和基于云的分析。
- 安全和认证：EMQX Enterprise 提供强大的安全功能，包括 TLS/SSL 加密传输、客户端认证和访问控制。它支持多种认证方法，如用户名/密码、X.509 证书和 OAuth，确保物联网通信的安全性。
- 规则引擎和数据处理：EMQX Enterprise 具有灵活的规则引擎，可以基于设备数据进行实时数据处理和转发。它支持数据过滤、转换、聚合和持久化等操作，帮助用户根据业务需求进行分析和决策。
- 可视化监控和管理：EMQX Enterprise 提供直观的可视化监控和管理界面，允许用户实时监控物联网设备和消息传输。用户可以查看连接状态、消息流量和其他指标，还可以进行设备管理、故障排除和系统配置操作。

<section class="promotion">
    <div>
        免费试用 EMQX 企业版
            <div class="is-size-14 is-text-normal has-text-weight-normal">无限连接，任意集成，随处运行。</div>
    </div>
    <a href="https://www.emqx.com/zh/try?product=enterprise" class="button is-gradient px-5">开始试用 →</a>
</section>

### EMQX ECP

[EMQX ECP](https://www.emqx.com/zh/products/emqx-ecp) 一款面向工业 4.0 的工业互联数据平台，旨在满足工业场景大规模数据采集、处理和存储分析的需求，ECP 提供边缘服务的快速部署、远程操作和集中管理等功能，助力工业领域数据互联互通，实现数据驱动的生产和运营。在智慧水务场景中，ECP 可以提供以下能力：

- 边缘与云端协作：EMQX ECP 边缘服务管理实现了对边缘软件 NeuronEX、 NanoMQ 等边缘服务部署、管理、配置下发、批量操作、监控和优化。通过提供统一的管理平台，实现双向数据传输与运管边能力；
- 多集群管理：在分租户分项目的基础上实现多集群管理，可以创建新集群或纳管已有集群，并对管理的集群进行修复、水平和垂直扩展、修改网络类 型、修改连接数、升降级、集群转让和删除等操作；同时集成 EMQX Dashboard，方便用户直接在 ECP 平台操作和配置 EMQX 集群；
- 多组织多项目管理：EMQX ECP 提供的组织管理功能是一个支持企业级多租户的管理系统，能够实现不同组织的资源隔离和管理。EMQX ECP 可以在同一平台中为多个企业或业务部门提供隔离的 EMQX 数据基础架构服务，每个组织都能够使用自己的数据和配置，互不干扰，保证数据安全。
- 企业级安全性：基于角色的访问控制 (RBAC)、单点登录 (SSO)、链路加密以及带审计的操作日志确保企业级安全性。
- 监控运维与告警：ECP 的监控平台提供了在云端 EMQX 集群和边缘端进行统一管理和监控的方案。在 ECP 平台中，系统会收集和分析来自云端 EMQX 集群和边缘端的监控数据，以提供更全 面和精细化的管理和监控进行预测故障和风险。

 

<section class="promotion">
    <div>
        咨询 EMQ 技术专家
    </div>
    <a href="https://www.emqx.com/zh/contact?product=solutions" class="button is-gradient px-5">联系我们 →</a>
</section>
