本月初 [EMQX](https://www.emqx.io/zh) 团队正式发布了 5.0-beta.3 版本。后续 EMQX 团队除了继续推进 5.0-beta.4 版本的开发以外，还将对已发行版本进行维护。开源和企业版的 v4.3、v4.4 都将迎来一次小版本升级，除了日常的问题修复以外，还有诸如规则引擎支持消息丢弃事件等的功能增强，希望这些改动能够进一步提升当前用户的使用体验。

云服务方面，本月 [EMQX Cloud](https://www.emqx.com/zh/cloud) 新增了自定义 HTTP 认证和 Webhook 告警模式，让用户更灵活自由地使用产品的同时，获得更可靠的业务保障。

## EMQX

### v5.0 新进展：beta.3 开放全新 Dashboard，beta.4 将优化规则引擎交互

本月初我们完成了 5.0-beta.3 的测试工作并将其正式发布，这仍是一个早期版本。 在这个版本中我们开放了全新设计的 Dashboard，大家可以一睹为快，传送门：[EMQX v5.0-beta.3](https://github.com/emqx/emqx/releases/tag/v5.0-beta.3)。 规则引擎和部分功能的页面还在完善中，稍晚一些会与大家见面。

在全新的 Dashboard 中，我们简化了认证、授权、网关等常用功能的操作路径，并基于各自的功能点重新设计了操作方法。现在我们可以直接在 Dashboard 上完成这些功能的配置和使用，而无需通过命令行或其他方式修改配置文件才能对某个功能进行更改。类似基于内置数据库的认证、授权等功能，我们也提供了相应的数据管理页面以提高易用性。

我们还在这一版本中改进了集群相关的实现，以确保集群环境下的操作同步，同时修复了一些在 beta.2 中发现的问题。

在 beta.4 版本，我们将继续完善和优化规则引擎相关的交互设计，期望能够为大家带来更加简单易用的规则引擎。依然被保留但是经过了重新设计和实现的插件功能也会以全新的面貌与各位见面。此外 EMQX 研发团队还将持续完善和提高测试覆盖率，以确保最终为大家带来一个稳定可靠的 EMQX v5.0。

### 即将迎来小版本升级：面向社区和企业的 v4.3、v4.4

开源和企业版的 v4.3、v4.4 即将迎来一次小版本升级，除了日常的问题修复以外，还有一些功能上的改进和增强。

首先是规则引擎支持为客户端消息异常丢失事件配置规则与动作，以增强用户在这一场景的自定义处理能力。然后依旧是规则引擎，我们细化了规则引擎 SQL 匹配执行的相关统计指标，新的统计指标将覆盖 SQL 命中、执行成功、执行失败以及失败原因等各个方面，以增强用户在使用规则引擎时的问题定位能力。

新版本还对 ACL 的统计指标进行了改进，即使是命中 ACL 缓存，也会被正确计入，同时也提供了单独的命中计数。我们还增加了客户端级别的消息丢弃的相关统计指标（面向 4.4 版本），它们将展示在客户端的详情页中，帮助用户更准确地定位问题。

4.4.0 版本新增的在线 Trace 功能，在这次版本升级中改进了日志内容的渲染方式，使用颜色、高亮对内容进行区分，进一步优化日志浏览体验。

除此之外，企业版 v4.4.1 也将同步 v4.3.6 上规则引擎对 Ali Lindorm 数据库时序数据引擎的支持，对该数据库的适配已经通过了 10w/s 的写入性能测试。

### 社区生态：支持 Elixir

经过 EMQX 团队这段时间的努力， EMQX 项目现在已支持使用 Elixir 构建，相关代码目前已并入 master 分支，这将为我们迎接更好的社区生态提供支持和帮助。

关于通过 EMQX 在 Elixir 中的使用 MQTT 的方法，可以参考：[MQTT 在 Elixir 中的应用](https://www.emqx.com/zh/blog/mqtt-for-elixir)。

### Mria 架构通过五千万连接性能验证

这段时间以来，EMQX 团队都在安排进行 v5.0 Mria 数据库架构健壮性的相关测试。目前，该架构已经通过了单集群五千万连接的验证。这只是我们的一个阶段性成果，我们的最终目标是实现单集群支撑 1 亿连接，这将是一个非常具有挑战性的目标，但我们相信这并非不可能。后续的最新进展我们也会第一时间与大家分享，并且也会带来更加详细的信息。

### 升级方式持续优化

EMQX 自 v4.2 起，支持 patch 版本的热更（无需重启节点，不影响业务）；从 v4.3 开始，小版本升级支持集群节点滚动升级。从 v5.0 开始，我们将推进支持跨大版本的集群滚动升级，进一步降低升级复杂度。

为了解决集群滚动升级过程中，集群同一时间内存在多个版本的节点时 RPC 调用的兼容性问题，我们正在推进支持跨版本 RPC API 的开发工作，这一功能将极大提升集群滚动升级的灵活性，增大支持滚动升级的版本跨度。

## EMQX Cloud

### 自定义 HTTP 认证

EMQX Cloud 本月推出了 HTTP 自定义认证功能。HTTP 认证允许用户连接到自建外部 HTTP 应用认证数据源，根据 HTTP API 返回的数据判定认证结果，从而实现复杂的认证和复杂的访问控制逻辑。自定义 HTTP 认证的功能可以在【部署】 - 【部署详情】 - 【认证鉴权】中进行配置。

自定义 HTTP 认证的原理为：EMQX Cloud 在设备连接事件中使用当前客户端相关信息作为参数，向用户自定义的认证服务发起请求查询权限，通过返回的 HTTP 响应状态码 (HTTP statusCode) 来处理认证请求。用户可以配置连接认证的参数以及访问控制的参数。

![EMQX Cloud 自定义 HTTP 认证](https://static.emqx.net/images/a66a7786d7aecc7d7eb08114680f94c8.png)

对于基础版的部署，认证以及访问控制的请求地址需填写公网的相关请求连接，专业版的部署则需要首先完成 VPC 的配置，并且填写服务内网的地址。

自定义认证可以让用户更灵活地根据自己的业务需要进行鉴权认证，作为一个中间件云服务，提供了更好的集成和连接的手段，解决了海量设备认证流程复杂的问题，同时大幅提高了认证的安全性。

### Webhook 告警添加测试信息发送功能

本月上线了通过 Webhook 向 IM 工具和自有服务发送告警消息的功能。同时为了方便用户测试配置是否成功，告警功能可以发送测试消息可以立刻验证 Webhook 地址是否配置正确。

至此 EMQX Cloud 支持邮箱告警集成、PagerDuty 事件告警集成和 Webhook 告警集成三种模式，丰富的告警集成模式与告警事件将使整个产品的自动化预警功能模块更加完善，为用户带来更稳定的业务保障。

![EMQX Cloud Webhook](https://static.emqx.net/images/66765175c120f1a84d9efbc1c85350d0.png)

### 基础版扩容

目前 EMQX Cloud 已支持对当前部署的扩容，用户可以根据自己的连接需求伸缩部署的规格，同时也优化了扩容时设备断连的时间，减少对业务系统的干扰。

 
为了完成「通过世界级开源软件产品服务人类未来产业与社会」的使命，敬请期待一个更优秀的 EMQX。
