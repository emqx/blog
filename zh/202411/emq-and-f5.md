## 引言

随着物联网技术的快速发展和在各行业的广泛应用，海量的设备连接以及随之快速增长的数据流量对可靠、安全的大规模数据接入方案提出了迫切需求。为此，全球领先的「云边端」连接与数据平台供应商 EMQ 与应用交付网络解决方案提供商 F5 结合双方技术优势，共同打造了面向新兴智能物联场景的数据安全接入方案，为物联网关键业务场景提供可靠设备连接、安全数据传输，保障企业智能化系统的高效运作。

## EMQ & F5：打造大规模数据安全接入方案

### EMQX Platform：高并发、高可靠的物联网数据接入

EMQX Platform (以下简称 EMQX) 是由 EMQ 提供的一个企业级 MQTT 物联网接入平台，专为大规模部署和物联网应用中的高可靠性而设计，适用于车联网、工业物联网和 AIoT 等复杂场景。EMQX 通过以下关键能力帮助企业实现高效数据接入和管理：

- 高可靠性和可扩展性：EMQX 采用分布式架构，具有高可用性和可扩展性，可以处理大规模并发消息传输。它支持水平扩展，以适应不断增长的物联网设备和数据流量，确保系统稳定性。
- 丰富的协议支持：除了 [MQTT 协议](https://www.emqx.com/zh/blog/the-easiest-guide-to-getting-started-with-mqtt)外，EMQX 还支持多种消息传输协议。它允许开发人员扩展以支持各种私有协议，以满足其应用需求。
- 灵活数据集成：EMQX 与各种数据存储服务、消息队列、云平台和应用无缝集成。它可以连接到云服务，实现远程数据传输和基于云的分析。
- 安全和认证：EMQX 提供强大的安全功能，包括 TLS/SSL 加密传输、客户端认证和访问控制。它支持多种认证方法，如用户名/密码、X.509 证书和 OAuth，确保物联网通信的安全性。
- 规则引擎和数据处理：EMQX 具有灵活的规则引擎，可以基于设备数据进行实时数据处理和转发。它支持数据过滤、转换、聚合和持久化等操作，帮助用户根据业务需求进行分析和决策。
- 可视化监控和管理：EMQX 提供直观的可视化监控和管理界面，允许用户实时监控物联网设备和消息传输。用户可以查看连接状态、消息流量和其他指标，还可以进行设备管理、故障排除和系统配置操作。  

### NGINX-Plus & BIG-IP：企业级流量管理与高效负载分配

NGINX-Plus 是 F5 推出的高性能开源负载均衡服务器和反向代理服务器 NGINX 的企业版，提供负载均衡、缓存、SSL/TLS 终止以及应用健康检查等相关功能。

BIG-IP 是 F5 的明星产品，主要用于负载均衡、Web 应用防火墙、安全套接字层（SSL）终止、动态负载均衡和全局服务器负载均衡。

### EMQX Platform + NGINX-Plus / BIG-IP：一体化数据接入与负载均衡

![架构图](https://assets.emqx.com/images/a661ad26d8c3cef8e9f7ec9b2b7b13fd.png)

通过将 EMQX Platform 与 NGINX-Plus 和 BIG-IP 相结合，可以打造一套整合负载均衡与 MQTT 消息接入的一体化解决方案。该方案将提供 MQTT 负载能力，并通过 SSL 卸载能力提升 MQTT 集群的性能，同时为用户带来以下优势特性：

- **灵活调度的全局负载均衡（GSLB）**：智能监控分布式集群的负载情况，将用户请求动态分配到最优的节点上。当节点故障时，可以自动将流量引导至其他节点，确保服务的连续性和高可靠性。
- **TLS、DTLS、GMSSL 证书校验**：全方位的安全认证支持，保障不同地区和行业的安全要求。
- **会话保持（Sticky Sessions）与 TCP 迁移（TCP Connection Migration）**：减少系统升级、扩容或节点故障时的断连现象，提升用户体验。
- **信息安全与会话日志**：集成强大的安全日志记录与分析功能，帮助企业全面掌握和审计系统运行情况，实现合规性要求。
- **MQTT over QUIC 负载均衡**：通过引入创新性的 [MQTT over QUIC](https://www.emqx.com/zh/blog/mqtt-over-quic)，实现高可靠、低延迟的连接，适用于车联网等网络环境复杂、传输需求高的场景。

这一联合方案可以在实现海量数据接入的同时提供可靠的流量管理，保障数据的安全交付，帮助企业构建更加稳定、安全的物联网平台与应用。

## 应用场景

### 全球范围内的智能流量调度：保障车联网和智能工厂的稳定数据交互

在车联网和工业互联网领域，设备分布广泛且对实时数据传输有着严格的需求。EMQ 与 F5 联合方案提供全局负载均衡（GSLB, Global Server Load Balancing）功能，能够监控整个分布式集群的负载情况，并根据各个区域内的用户请求，将流量智能调度到最近的节点，确保数据传输的低延迟。

以车联网为例，车辆需要与最邻近的服务器进行实时通信，以确保导航、远程诊断、车队管理等功能的准确性和及时性。当某个服务节点出现故障时，GSLB 会将请求自动转移至其他节点，保障数据传输的稳定性与可靠性。这一功能将帮助车联网、智能工厂、能源电力物联网等需要大量数据交互的场景实现高性能、稳定的连接和监控，从而优化业务连续性与服务质量。

![智能流量调度架构](https://assets.emqx.com/images/86f0a3f503e902d6c3ecdd25032ae99b.png)

### TCP 会话迁移：关键业务系统的无缝升级扩容

对于大规模车联网和智能制造等场景，系统升级和 IT 资源扩展是经常性的需求。在这些情况下，传统方案会导致设备连接出现短暂的断连和重连，对客户体验与关键业务的连续性带来影响。

EMQ 与 F5 的联合方案提供了 TCP 会话迁移（TCP Connection Migration）能力，可实现系统升级扩容中最短断连甚至不断连。借助 BIG-IP 的全代理架构，将客户端到服务端的一个连接拆分为客户端到负载均衡、负载均衡到服务端两个连接，结合其 MRF（Message Routing Framework）功能，通过扮演消息“路由器”的角色识别并路由 TCP 会话中的消息，对 MQTT 消息进行处理和转发。TCP 会话迁移功能可以实现 MQTT 服务端的平滑扩展、无感的故障转移和服务下线，特别适合高稳定性、高可用性需求的场景。

![TCP 会话迁移](https://assets.emqx.com/images/63fa24d5e9c74de07f68f9f242fc18b4.png)

### 基于 MQTT over QUIC 的负载均衡：高效车联网通信

在高速公路或远程山区等信号不稳定的环境中，车联网通信需要克服网络波动，保障车队管理、远程驾驶辅助、信息娱乐等业务的连续性。EMQ 全球首创的 MQTT over QUIC 传输技术为这些场景提供了低延迟和高可靠的通信协议，能够在网络波动中保持数据传输的稳定性。结合 F5 在负载均衡技术领域的优势，双方的联合方案不仅确保数据包能够快速转发至最邻近的服务器，还优化了网络切换下的通信流畅度，适用于高速移动的车辆、车路协同和边远地区的通信需求。通过此解决方案，车联网业务可实现大规模、高效率的通信，保障交通系统的安全和效率。

![高效车联网通信1](https://assets.emqx.com/images/6dd06f76bc7e144ff2a757d1ceedd64e.png)
![高效车联网通信2](https://assets.emqx.com/images/537060c7c6f952deae1a5f5ab957ed37.png)

## 结语

EMQ 与 F5 的联合方案通过整合 EMQX Platform 的高并发物联网接入能力与 F5 的全球领先负载均衡与安全技术，为大型智能物联场景提供了一体化、可扩展的高性能数据安全接入方案。该方案确保了数据传输的安全性和系统的稳定性，为车联网、工业物联网和 AIoT 等关键任务场景提供了可靠保障。



<section class="promotion">
    <div>
        咨询 EMQ 技术专家
    </div>
    <a href="https://www.emqx.com/zh/contact?product=solutions" class="button is-gradient">联系我们 →</a>
</section>
