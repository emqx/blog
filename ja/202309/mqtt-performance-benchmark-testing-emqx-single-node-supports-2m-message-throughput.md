## **背景**

この記事では、EMQXのメッセージスループットのベンチマーク結果を提供します - EMQXのシングルノードは1秒間に200万メッセージのスループットを処理できます。

## **テストシナリオ**

このベンチマークテストは、EMQXに接続する20のパブリッシャと1000のサブスクライバをシミュレートします。すべての接続が確立されると、各パブリッシャは1秒あたりペイロード16バイトのQoS 0メッセージを100個発行します。 サブスクライバは、トピックワイルドカードを介してすべてのパブリッシャのメッセージを購読します。

- 平行接続: 20のパブリッシャ、1000のサブスクライバ
- **パブリッシュ**トピック: 各パブリッシャには`test/` をプレフィックスとする一意のトピックがあります
- **サブスクライブ**トピック: すべてのサブスクライバは `test/#` の形式のワイルドカードトピックを購読します
- QoS: 0
- ペイロード: 16バイト
- メッセージスループット: 2,000,000/秒

## **テスト環境**

テスト環境はAlibaba Cloud上に構成されており、すべての仮想マシンはVPC(仮想プライベートクラウド)サブネット内にあります。

### **マシンの詳細**

| サービス | デプロイ    | バージョン | OS       | CPU  | メモリ | クラウドホストモデル |
| :------- | :---------- | :--------- | :------- | :--- | :----- | :------------------- |
| EMQX     | single node | 5.0.21     | RHEL 8.5 | 64C  | 128G   | hfc6.16xlarge        |

### **テストツール**

このベンチマークテストでは、[**XMeter**](https://www.emqx.com/ja/products/xmeter)を使用してMQTTクライアントをシミュレートします。 XMeterはJMeter上に構築されていますが、スケーラビリティと機能が強化されています。 テスト中に包括的かつリアルタイムのテストレポートを提供します。 さらに、組み込みのモニタリングツールを使用して、EMQXマシンのリソース使用状況を追跡します。

XMeterにはオンプレミス版とパブリッククラウドSaaS版があります。 このテストでは、EMQXと同じVPCにプライベートXMeterをデプロイしています。

![Test Architecture Diagram](https://assets.emqx.com/images/76af39a96c5f485a576a6ee2acb6e86d.png)

## **システムチューニング**

Linuxカーネルのチューニングについては、[**EMQXドキュメント**](https://www.emqx.io/docs/en/v5.0/performance/tune.html)を参照してください。

## **ベンチマーク結果**

EMQXダッシュボードは、2M以上の発信メッセージ/秒が達成され、レートは30分間のテスト全体でかなり安定していることを示しています。

![Benchmark Results](https://assets.emqx.com/images/5aa62d0d22035ed2ade692205b8d1154.png)

![图片.png](https://assets.emqx.com/images/aa1d7320da5b6b274651304d23bab88e.png)

### **メトリクス**

| パブ-サブの平均レイテンシ            | 2.93ms               |
| :----------------------------------- | :------------------- |
| メッセージングフェーズのCPU使用率    | 最大92%、平均88%     |
| メッセージングフェーズのメモリ使用量 | 最大1.2GB、平均1.1GB |

## **まとめ**

このベンチマークレポートは、シングルノードデプロイメントにおけるEMQXのメッセージスループットパフォーマンスの高さを示しています。 EMQXは、大量のメッセージ送信下でもメッセージレイテンシを低く保ちながら、複雑なビジネスシナリオで使用できます。



<section class="promotion">
    <div>
        EMQX Enterprise を無料トライアル
      <div class="is-size-14 is-text-normal has-text-weight-normal">任意のデバイス、規模、場所でも接続可能です。</div>
    </div>
    <a href="https://www.emqx.com/ja/try?product=enterprise" class="button is-gradient px-5">Get Started →</a>
</section>
