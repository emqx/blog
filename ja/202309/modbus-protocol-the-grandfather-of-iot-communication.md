## Modbusプロトコルとは何ですか?

Modbus プロトコルは、デバイスがシリアル ラインやイーサネットなどのさまざまな種類のメディアを介して通信できるようにする通信プロトコルです。これは、プログラマブル ロジック コントローラー (PLC) を製造する会社である Modicon によって 1979 年に開発され、これらのデバイスが相互に通信できるようになりました。

Modbus は、インテリジェント デバイス間のマスター/スレーブ通信を確立するように設計されたメッセージング構造を提供します。デバイス A (マスター) から送信された Modbus メッセージは、デバイス B (スレーブ) からの応答を開始します。Modbus プロトコルの機能は、通信の内容、情報のパッケージ化方法、メッセージの送受信の順序を定義することです。

Modbus プロトコルはシンプルかつ堅牢であるため、産業用制御システムによく選ばれています。これはオープンスタンダードであり、誰でも自由に使用および変更できることを意味し、業界全体で広く採用されています。

本記事は、Modbusと[MQTT プロトコル](https://www.emqx.com/ja/blog/the-easiest-guide-to-getting-started-with-mqtt)および関連IIoTプロトコルに関する記事の一つです。

## Modbus プロトコルの歴史と起源

Modbus プロトコルは、現在シュナイダー エレクトリック社が所有する会社である Modicon によって 1979 年に開発されました。Modicon は、製造業で工業用電気機械プロセスの自動化に使用される PLC (プログラマブル ロジック コントローラー) で使用するプロトコルを作成しました。

Modbus プロトコルの使用を提唱する独立したユーザーとサプライヤーのグループである Modbus Organization は、プロトコル、その仕様、および関連情報へのパブリック アクセスを提供するために 2002 年に設立されました。また、この組織は、産業オートメーション市場における Modbus プロトコルの継続的な可用性、拡張、およびアプリケーションを保証します。

その創設以来、Modbusプロトコルは多くの異なる業界で幅広いデバイスに実装されてきました。そのシンプルさ、オープン性、および実装の容易さによって、人気が続いています。

## Modbus プロトコルのコンポーネント

### Modbus デバイス/マシン

Modbus デバイスまたはマシンは、Modbus プロトコルを使用して通信する実際の物理デバイスです。これらのデバイスは、温度センサーからモーター コントローラーまで、あらゆる場所に設置でき、工場のフロアから遠隔の石油採掘装置までさまざまな場所に設置できます。

### Modbusマスター

Modbusマスターは、Modbusトランザクションを開始するデバイスです。Modbusスレーブデバイスに要求を送信し、応答を待ちます。マスターは複数のスレーブと通信することができ、それぞれから異なるタイプのデータを要求することができます。

### Modbusスレーブ

Modbusスレーブは、Modbusマスターからの要求を待つデバイスです。要求を受信すると、それを処理してマスターに応答を返します。スレーブは通信を開始しません。マスターからの要求にのみ応答します。

### データモデルとレジスタ (Data Model and Registers)

Modbus データ モデルは、一連のレジスタに基づいています。これらのレジスタは、データを保持できるデバイス内の単なるメモリの場所であり、デバイス内の記憶域を表します。レジスタには次の 2 種類があります。

- **保持レジスタ (Holding registers):** Modbus マスターによって読み書きできます。
- **入力レジスタ (Input registers):**マスターによってのみ読み取ることができます。

### 入力の種類

Modbus システムには主に 2 つの入力タイプがあります。

- **コイルは**、ON/OFF や TRUE/FALSE などのバイナリ状態を表す Modbus プロトコルのデータの一種です。これらは、Modbus マスターによって読み書きできます。
- **ディスクリート入力は、**バイナリ状態を表すという点でコイルに似ています。ただし、コイルとは異なり、読み取りのみが可能であり、書き込みはできません。

### Modbusメッセージフレーム

Modbus フレームは Modbus メッセージの構造です。スタートフレーム、ファンクションコード、データ、エンドフレームで構成されます。次の表は、プロトコルの ASCII バージョンでのフレームの構造をより詳細に示しています (詳細は以下を参照)。

| Start | Address | Function | Data    | LRC     | End   |
| :---- | :------ | :------- | :------ | :------ | :---- |
| :     | 2 Chars | 2 Chars  | N Chars | 2 Chars | CR LF |

### Modbus通信モード

Modbus プロトコルには 3 つの主な通信モードがあります。

- RTU (リモート端末装置)
- ASCII (米国標準情報交換コード)
- TCP/IP (伝送制御プロトコル/インターネット プロトコル)

## Modbusプロトコルの種類

Modbus プロトコルにはいくつかのバリエーションがあります。主なものには次のようなものがあります。

### Modbus RTU

Modbus RTU (リモート ターミナル ユニット) は、Modbus プロトコルのバイナリ実装です。通常、シリアル通信を介して使用され、効率的で高速なコンパクトなデータ表現で知られています。

### Modbus ASCII

Modbus ASCII (American Standard Code for Information Interchange) は、Modbus プロトコルの ASCII 実装です。Modbus RTU よりも効率は劣りますが、直接に読める文字を使用するため、使用とデバッグが容易です。

### Modbus TCP/IP

Modbus TCP/IP は、TCP/IP ネットワーク上で使用される Modbus プロトコルのバージョンです。これにより、長距離や異なるネットワーク間での通信が可能になります。

### Modbus UDP

Modbus UDP (ユーザー データグラム プロトコル) は、UDP トランスポート プロトコルを使用する Modbus プロトコルのバージョンです。Modbus TCP/IP はパケットの配信や正しい順序を保証しないため、信頼性は Modbus TCP/IP よりも低くなりますが、高速で必要な帯域幅も少なくなります。

### Modbus プラス

Modbus Plus (MB+ または Modbus+) は、シュナイダー エレクトリックによって導入された Modbus プロトコルの独自のバリアントです。これは、標準 Modbus と比較して高速でより確定的なデータ転送を提供する peer-to-peer 通信プロトコルです。

## Modbusプロトコルの使用

### 産業自動化

Modbus プロトコルは、産業オートメーションの分野で幅広く応用されています。産業環境では、多数のデバイスや機械間で信頼性が高く効率的な通信ネットワークを維持することが不可欠です。Modbus を使用すると、プログラマブル ロジック コントローラー (PLC)、センサー、アクチュエーターなどのさまざまなデバイス間の標準化された通信が簡単に行えます。これは、製造工場、発電所、製油所、その他の産業環境で装置やプロセスを監視および制御するためによく使用されます。

### 車両システム

Modbus プロトコルは、車両システム内、特に電気自動車の分野でも利用されています。バッテリ管理システム、充電システム、インバータ システムなどのさまざまなパラメータの監視と制御に役立ちます。Modbus は、これらのシステムのスムーズな動作を保証するための効率的で実装が簡単なプロトコルを提供します。

### IoTにおける通信

モノのインターネット (IoT) の流行により、Modbus プロトコルの重要性が高まっています。Modbus、特に Modbus TCP/IP は、イーサネット ネットワークを介した IoT デバイス、センサー、コントローラー間の通信を可能にするために使用されます。そのシンプルさと幅広いサポートにより、IoT通信に通常の選択となっています。

### センサーとアクチュエーターの通信

Modbus プロトコルは、センサーとアクチュエーター間の通信を促進する上で重要な役割を果たします。センサーの読み取り値やアクチュエーターの制御信号などのデータを送信するための標準インターフェイスを提供します。これにより、集中制御システムまたは PLC がさまざまな機器を連携して監視および制御できるようになります。センサーとアクチュエーターの通信における Modbus プロトコルの使用は、産業機械から環境監視システムに至るまで、幅広い分野で普及しています。

## Modbus プロトコルの制限

Modbusプロトコルは多くの利点を持っていますが、一方でいくつかの制約もあります。その一つは組み込みのセキュリティ機能の欠如です。このプロトコルはインターネットの普及以前に開発されたため、通信を保護するためのメカニズムを含んでおらず、サイバー攻撃に対して脆弱です。

もう一つの制約は、プロトコルのシンプルさです。これにより使いやすく、実装も簡単ですが、それはより現代的なプロトコルにある高度な機能のいくつかを欠いていることを意味します。

これらの制約にもかかわらず、Modbusプロトコルはそのシンプルさ、堅牢性、幅広い互換性のため、多くのアプリケーションで人気の選択となっています。

## Modbus プロトコルと産業用モノのインターネット (IIoT) の統合: Neuron および EMQX

[産業用モノのインターネット ( IIoT )](https://www.emqx.com/ja/blog/iiot-explained-examples-technologies-benefits-and-challenges) の成長に伴い、自動化、制御、データ分析のために Modbus プロトコルと最新の IoT デバイスを統合する機会が数多くあります。IIoT を使用すると、Modbus デバイスをより大規模な相互接続システムの一部にすることができ、これらのデバイスからのデータを収集、分析、利用して、運用の最適化、安全性の向上、コストの削減を行うことができます。

[Neuron](https://neugates.io/)は、オープンソースのエッジ産業プロトコル ゲートウェイであり、Modbus TCP、Modbus RTU、Modbus UDP、Modbus RTU over TCP などのさまざまな Modbus ドライバーのサポートを提供します。これらの Modbus ドライバーにより、Modbus 対応デバイスと産業用モノのインターネット アプリケーションとのシームレスな統合が可能になります。これらにより、Neuron はさまざまな Modbus バリアントおよびプロトコルを使用して幅広い産業用デバイスと通信できるようになり、データの取得、制御、およびソリューションの他のコンポーネントとの相互運用性が可能になります。

各 Modbus ドライバーの説明は次のとおりです。

- **Modbus TCP:** Modbus TCP は、TCP/IP ネットワーク上で Modbus メッセージを送信できるようにする、広く使用されている通信プロトコルです。Modbus マスター デバイス (Neuron) と Modbus スレーブ デバイス (センサー、アクチュエーター、その他の産業用デバイスなど) 間の通信が可能になります。Neuron の Modbus TCP ドライバーは、これらのデバイス間のシームレスな統合と通信を可能にし、データ交換と制御を容易にします。
- **Modbus RTU:** Modbus RTU は、RS-485 や RS-232 などのシリアル インターフェイスを介した Modbus マスター デバイスとスレーブ デバイス間の通信に使用される一般的なシリアル通信プロトコルです。データのバイナリ表現を利用し、データが同時ではなくいずれかの方向に送信される半二重通信をサポートします。Neuron の Modbus RTU ドライバーは、このシリアル通信プロトコルを利用する Modbus デバイスとの接続を可能にし、産業環境でのデータ交換と制御を可能にします。
- **Modbus UDP:** Modbus UDP (ユーザー データグラム プロトコル) は、通信に UDP を使用する Modbus プロトコルの変種です。UDP は、低オーバーヘッドと高速伝送を実現するコネクションレス型プロトコルです。Modbus UDP は、リアルタイム制御アプリケーションなど、速度が重要なシナリオでよく使用されます。Neuron の Modbus UDP ドライバーは、基盤となるトランスポート プロトコルとして UDP を利用する Modbus デバイスとの通信を可能にします。
- **Modbus RTU over TCP:** Modbus RTU over TCP は、Modbus RTU フレームを TCP/IP パケット内にカプセル化して通信できるようにするメカニズムです。Modbus RTU のシンプルさと効率性を、TCP/IP のより広範なネットワーク機能と組み合わせます。Neuron の Modbus RTU over TCP ドライバーを使用すると、Modbus RTU プロトコルを使用するが TCP/IP 経由でネットワークに接続されている Modbus デバイスとの通信が可能になります。

[EMQX](https://www.emqx.com/ja/products/emqx)は業界をリードする MQTT ブローカーであり、IIoT 通信に効率的なメッセージングを提供します。Neuron と EMQX は、IIoT インフラストラクチャをサポートするための強力な組み合わせを形成します。Neuron はエッジ産業プロトコル ゲートウェイとして機能し、OT デバイスとの接続を促進し、安全なデータ交換を可能にし、EMQX は高速で信頼性の高いメッセージングを提供します。これらを組み合わせることで、シームレスな統合、信頼性の高いデータ通信が保証され、IIoT 環境での高度な分析と制御が可能になります。

Modbus 環境の EMQX と Neuron の詳細については、[「IIoT 向け Modbus データを MQTT にブリッジする: ステップバイステップのチュートリアル」](https://www.emqx.com/ja/blog/bridging-modbus-data-to-mqtt-for-iiot)を参照してください。



<section class="promotion">
    <div>
        ソリューション専門家に問い合わせ
    </div>
    <a href="https://www.emqx.com/ja/contact?product=solutions" class="button is-gradient px-5">お問い合わせ →</a>
</section>
