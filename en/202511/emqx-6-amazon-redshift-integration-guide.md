EMQX 6.0 has substantially enhanced its data integration capabilities, introducing crucial connectors to major cloud data platforms, including Amazon Redshift and Google BigQuery. This expansion ensures your IoT data can be routed efficiently to the best analytics engine for your needs.

Amazon Redshift is a fully managed, petabyte-scale cloud data warehouse that enables fast, efficient querying and analysis of large structured and semi-structured datasets, making it a powerful choice for persistent IoT telemetry.

This article will provide a comprehensive, step-by-step guide on how to successfully configure and deploy the EMQX 6.0 integration with Redshift, enabling a reliable pipeline for real-time IoT data warehousing.

## **Part 1: Prepare the Redshift Environment**

1. Log in to the AWS Management Console and open Amazon Redshift Query Editor v2.

2. Create a new database:

   ```sql
   CREATE DATABASE emqx_data;
   ```

3. Switch to the database and create two tables:

   ```sql
   CREATE TABLE t_mqtt_msg (
     id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
     msgid   VARCHAR(64),
     sender  VARCHAR(64),
     topic   VARCHAR(255),
     qos     INTEGER,
     retain  INTEGER,
     payload SUPER,
     arrived TIMESTAMPTZ
   );
   CREATE TABLE emqx_client_events (
     id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
     clientid   VARCHAR(255),
     event      VARCHAR(255),
     created_at TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP
   );
   ```

![image.png](https://assets.emqx.com/images/dab97021a0053a9d23826e7556659875.png)

![image.png](https://assets.emqx.com/images/772667773c81c19ba6b1dcaa5186fb43.png)

##  Part 2: Configure the Redshift Connector in EMQX

1. Open the EMQX Dashboard
2. Navigate to Integration → Connectors → Create
3. Select Amazon Redshift as the connector type and click Next
4. Fill in your Redshift endpoint, credentials, and test the connection
5. Save the connector

![image.png](https://assets.emqx.com/images/3216d930b8395bafa1882d05b83d407d.png)

## Part 3: Create a Rule to Ingest MQTT Messages

### **Step 1. Define the Rule SQL**

Navigate to Integration → Rules → Create, then set:

- Rule ID: `store_mqtt_msg`
- Rule SQL:

```sql
SELECT
  id as msgid,
  clientid as sender,
  topic,
  qos,
  payload,
  timestamp
FROM
  "sensors/#"
```

![image.png](https://assets.emqx.com/images/52ef4cf32a0312f62be74ab74bc13a2c.png)

### Step 2. Add the Redshift Action

1. Click Add Action → Redshift → Create New Action.

2. Configure the following:

   ```sql
   INSERT INTO t_mqtt_msg(msgid, sender, topic, qos, payload, arrived)
   VALUES (
     ${msgid},
     ${sender},
     ${topic},
     ${qos},
     ${payload},
     timestamp 'epoch' + (${timestamp} :: bigint / 1000) * interval '1 second'
   ```

1. Click Test Connection → Create → Add to Rule → Save.

   ![image.png](https://assets.emqx.com/images/191063a4b11ae8d88112c4959993a676.png)

   In the Rules → Overview page, increased *Matched* and *Success* (with *Failed = 0*) indicate the message reached EMQX and the rule was executed successfully.

   ![image.png](https://assets.emqx.com/images/2c584aef17f2cce288a26660f6722e28.png)

## **Part 4: Test the Integration**

### **Step 1. Publish a Test MQTT Message**

Use [MQTTX](https://mqttx.app/) to send a test message:

1. Open MQTTX and connect to your EMQX broker.
2. Create a new Publish tab.
3. Set the Topic to `sensors/a`.
4. Set the Payload to `hello`.
5. Click Publish to send the test message.

### Step 2. Verify Data in Redshift

Run this query in the Redshift Query Editor:

```sql
SELECT sender, topic, payload, arrived
FROM t_mqtt_msg
ORDER BY arrived DESC
LIMIT 5;
```

![image.png](https://assets.emqx.com/images/9a6784c671a50e6b1eb00fe0819b2632.png)

You should now see the message ingested into Redshift in real time.

## Summary

You’ve now built a fully operational, real-time data pipeline from MQTT → EMQX → Redshift, without needing heavy ETL tools or complex transformations. With EMQX's built-in Redshift connector, IoT data flows seamlessly into your analytics platform, ready for dashboards, machine learning, or operational monitoring.

Unlock the full value of your streaming MQTT data and start making smarter, faster decisions powered by real-time insights.



<section class="promotion">
    <div>
        Talk to an Expert
    </div>
    <a href="https://www.emqx.com/en/contact?product=solutions" class="button is-gradient">Contact Us →</a>
</section>
